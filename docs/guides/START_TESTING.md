# 🎯 现在开始测试 API 溯源工具

## ✅ 开发完成清单

- [x] content.js (21KB, 660行) - API拦截核心
- [x] manifest.json - v2.9.0配置
- [x] popup.html - UI界面
- [x] popup.js - 控制逻辑

---

## 🚀 3步开始测试

### 第1步：重新加载扩展 (10秒)
```
1. 打开新标签: chrome://extensions/
2. 找到 SPX Helper
3. 点击 🔄 重新加载按钮
```

### 第2步：打开测试页面 (10秒)
```
推荐页面（任选一个）：
- DataSuite (数据最丰富)
- FMS SPX Admin
- 任意有表格/列表的页面
```

### 第3步：启动测试 (30秒)
```
1. 点击 SPX Helper 图标
2. 切换到"实用工具"
3. 点击"API溯源"按钮
4. 看到"已捕获 API" 数量 > 0
5. 点击"🎯 启动检查器"
6. 移动鼠标到页面元素 → 高亮显示
7. 点击元素 → 查看数据来源
8. 按 ESC 退出
```

---

## 🎉 预期效果

### Console 输出
```
✅ [SPX Helper] API 数据溯源工具已加载
✅ [SPX Helper] 开始拦截 API 请求
📡 [SPX Helper] Fetch: https://...
📡 [SPX Helper] Fetch: https://...
```

### Popup 显示
```
┌─────────────────────────┐
│ 🔍 API 数据溯源         │
├─────────────────────────┤
│ [🎯 启动检查器]         │
│                          │
│ 已捕获 API: 15  待命     │
│                          │
│ 📋 最近的 API 调用      │
│ GET 200 /api/... (125ms)│
└─────────────────────────┘
```

### 页面效果
```
检查器启动后：
┌────────────────────────────┐
│ 🎯 API 溯源模式 [ESC 退出]│ ← 顶部紫色提示条
└────────────────────────────┘

元素高亮：
[紫色边框 + 半透明背景]

点击后弹出面板：
显示数据来源 API
```

---

## 📋 测试检查清单

### 必测功能
- [ ] API 自动拦截 (Console 有日志)
- [ ] 统计数量正确 (已捕获 API > 0)
- [ ] 启动检查器成功 (顶部提示条显示)
- [ ] 元素高亮正常 (鼠标悬停)
- [ ] 数据来源匹配 (点击元素弹出面板)
- [ ] ESC 退出正常

### 可选测试
- [ ] 查看完整响应
- [ ] 复制 API URL
- [ ] 查看匹配详情
- [ ] 测试"未找到"情况

---

## 🐛 如果遇到问题

### 问题1: Console 没有日志
**解决**: 刷新页面让 content.js 重新注入

### 问题2: "已捕获 API" 为 0
**解决**: 确认页面有 API 调用，刷新页面

### 问题3: 启动检查器失败
**解决**: 刷新页面，重新打开扩展

### 问题4: 点击元素没反应
**正常**: 硬编码的元素会显示"未找到数据来源"

---

## 💡 测试技巧

### 最佳测试元素
✅ 表格行、卡片、列表项
✅ 显示数字、名称的元素
❌ 标题、按钮、图标

### 快速验证方法
在 Console 运行：
```javascript
// 检查是否加载
window.spxAPITracker ? '✅ 已加载' : '❌ 未加载'

// 查看 API 数量
window.spxAPITracker?.apiRecords.size

// 手动启动检查器
window.spxAPITracker?.enableInspectorMode()
```

---

## 🎊 测试通过标准

所有以下条件满足 = 测试通过：

1. ✅ Console 有 API 拦截日志
2. ✅ Popup 显示 API 数量 > 0
3. ✅ 检查器启动成功（顶部提示条）
4. ✅ 元素高亮正常
5. ✅ 点击元素弹出面板
6. ✅ 无 Console 错误

---

## 📚 详细文档

需要更多信息？查看：
- `API_TRACKER_QUICK_TEST.md` - 详细测试步骤
- `API_TRACKER_IMPLEMENTATION_GUIDE.md` - 技术实现
- `RELEASE_NOTES_v2.9.0.md` - 完整发布说明

---

**准备好了吗？开始测试吧！🚀**

有任何问题随时告诉我！
