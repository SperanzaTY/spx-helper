# 使用示例与开发指南

## 功能详细说明

### 1. 快速笔记功能

快速笔记是值班期间记录重要信息的核心功能。

**使用场景：**
- 记录客户问题
- 记录故障信息
- 记录临时任务
- 记录重要电话内容

**操作步骤：**
1. 在文本框中输入笔记内容
2. 点击"保存笔记"按钮
3. 笔记会显示在下方列表中，包含时间戳
4. 每条笔记都可以单独删除

**数据存储：**
- 所有笔记保存在Chrome本地存储
- 数据结构：`{ id, content, timestamp }`
- 按时间倒序排列（最新的在上面）

### 2. 提醒功能

定时提醒功能帮助你不会忘记重要事项。

**使用场景：**
- 定期巡检提醒
- 会议提醒
- 任务截止提醒
- 换班提醒

**操作步骤：**
1. 输入提醒内容（如："检查服务器状态"）
2. 输入多少分钟后提醒（默认30分钟）
3. 点击"设置提醒"
4. 查看待触发的提醒列表
5. 时间到达时会收到系统通知
6. 可以随时取消未触发的提醒

**技术实现：**
- 使用Chrome Alarms API
- 使用Chrome Notifications API
- 提醒触发后自动从列表移除

### 3. 常用链接管理

快速访问常用的工作网站和工具。

**使用场景：**
- 监控系统链接
- 工单系统链接
- 文档链接
- 管理后台链接

**操作步骤：**
1. 输入链接名称（如："监控系统"）
2. 输入完整的URL地址
3. 点击"添加链接"
4. 点击链接卡片在新标签页打开
5. 点击"删除"移除不需要的链接

**预设示例：**
- 系统已预置一个示例链接
- 可以根据需要修改或删除

### 4. 值班统计

记录和统计值班时长。

**功能特点：**
- 一键开始值班计时
- 实时显示当前值班时长
- 显示本次值班记录的笔记数量
- 结束值班时自动保存历史记录

**操作流程：**
1. 开始值班时点击"开始值班"按钮
2. 系统开始计时，实时更新时长
3. 正常工作，记录笔记等
4. 结束值班时点击"结束值班"按钮
5. 系统保存本次值班记录

**历史记录：**
- 保存每次值班的开始、结束时间
- 记录值班时长
- 可用于统计分析（未来可扩展）

## 开发指南

### 代码结构

```
SPX_Helper/
├── manifest.json       # 扩展配置（权限、版本、图标等）
├── popup.html         # 用户界面HTML结构
├── popup.js           # UI交互逻辑
├── background.js      # 后台服务（提醒、通知）
├── styles.css         # 样式设计
└── images/            # 图标资源
```

### 扩展开发

#### 添加新功能

1. **修改UI** - 在 `popup.html` 中添加新的界面元素
2. **添加样式** - 在 `styles.css` 中定义样式
3. **实现逻辑** - 在 `popup.js` 中添加功能代码
4. **后台服务** - 如需后台任务，修改 `background.js`
5. **更新权限** - 如需新权限，修改 `manifest.json`

#### 调试技巧

**查看控制台：**
- 右键点击扩展图标
- 选择"检查"或"审查元素"
- 在开发者工具中查看日志

**查看存储数据：**
```javascript
// 在控制台执行
chrome.storage.local.get(null, function(data) {
  console.log(data);
});
```

**清除测试数据：**
```javascript
// 在控制台执行
chrome.storage.local.clear();
```

**重新加载扩展：**
1. 访问 `chrome://extensions/`
2. 找到"值班助手"
3. 点击刷新按钮 🔄

### 功能扩展建议

#### 1. 数据导出导入
```javascript
// 导出数据
function exportData() {
  chrome.storage.local.get(null, function(data) {
    const json = JSON.stringify(data, null, 2);
    // 下载JSON文件
  });
}

// 导入数据
function importData(jsonData) {
  chrome.storage.local.set(JSON.parse(jsonData));
}
```

#### 2. 值班报告生成
```javascript
function generateReport() {
  chrome.storage.local.get(['dutyHistory', 'notes'], function(result) {
    // 生成markdown或HTML格式的报告
    // 包含值班时长、处理事项、笔记内容等
  });
}
```

#### 3. 数据云端同步
```javascript
// 使用Chrome Storage Sync API
chrome.storage.sync.set({ key: value });
chrome.storage.sync.get(['key'], function(result) {
  console.log(result.key);
});
```

#### 4. 主题切换
```css
/* 添加暗色主题 */
body.dark-theme {
  background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
}
```

#### 5. 快捷键支持
```json
// 在manifest.json中添加
"commands": {
  "quick-note": {
    "suggested_key": {
      "default": "Ctrl+Shift+N"
    },
    "description": "快速添加笔记"
  }
}
```

### 性能优化

1. **限制数据大小** - 笔记数量超过100条时自动归档
2. **懒加载** - 长列表使用虚拟滚动
3. **缓存机制** - 常用数据缓存到内存
4. **防抖节流** - 输入框使用防抖，避免频繁保存

### 安全注意事项

1. **XSS防护** - 使用 `escapeHtml()` 函数处理用户输入
2. **URL验证** - 使用 `isValidUrl()` 验证链接
3. **权限最小化** - 只申请必需的权限
4. **数据加密** - 敏感信息考虑加密存储

## 常见问题解答

### Q: 如何备份数据？
A: 目前数据存储在Chrome本地，建议定期导出笔记内容。未来版本会添加一键导出功能。

### Q: 卸载扩展会丢失数据吗？
A: 是的，卸载会清除所有数据。请在卸载前备份重要信息。

### Q: 可以设置重复提醒吗？
A: 当前版本不支持，但可以手动再次设置。未来会添加重复提醒功能。

### Q: 支持团队协作吗？
A: 当前版本是个人使用工具。团队功能需要后端服务支持，可以考虑未来扩展。

### Q: 如何修改默认提醒时间？
A: 修改 `popup.js` 中的默认值，将 `value="30"` 改为你需要的分钟数。

## 版本规划

### v1.1（规划中）
- [ ] 数据导出导入功能
- [ ] 搜索笔记功能
- [ ] 笔记分类标签
- [ ] 深色主题支持

### v1.2（规划中）
- [ ] 值班报告生成
- [ ] 数据统计图表
- [ ] 重复提醒功能
- [ ] 快捷键支持

### v2.0（未来展望）
- [ ] 云端数据同步
- [ ] 团队协作功能
- [ ] 移动端支持
- [ ] API接口集成

## 贡献代码

欢迎提交PR！请遵循以下规范：

1. Fork项目
2. 创建功能分支
3. 编写清晰的提交信息
4. 提交Pull Request
5. 等待代码审查

---

**技术支持**: 如有问题，请提交Issue或联系开发者

**许可证**: MIT License - 自由使用和修改

