# ğŸ“ ç«™ç‚¹æŸ¥è¯¢ + æ•°æ®åŒæ­¥ - å®Œæ•´ä½¿ç”¨æµç¨‹

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

1. **æ•°æ®åŒæ­¥**: ä» ONLINE2 ç”Ÿäº§ç¯å¢ƒåŒæ­¥æœ€æ–°ç«™ç‚¹æ•°æ®åˆ° TEST ç¯å¢ƒ
2. **ç«™ç‚¹æŸ¥è¯¢**: é€šè¿‡ Extension æŸ¥è¯¢ç«™ç‚¹ä¿¡æ¯

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### æ­¥éª¤ 1: æ•°æ®åŒæ­¥ï¼ˆéœ€è¦å†…ç½‘/VPNï¼‰

```bash
cd /Users/tianyi.liang/Cursor/SPX_Helper/station_query

# åŒæ­¥æ‰€æœ‰å¸‚åœºçš„æœ€æ–°æ•°æ®
python3 sync_station_data.py
```

**é¢„æœŸè¾“å‡º**:
```
ğŸš€ å¼€å§‹åŒæ­¥ 8 ä¸ªå¸‚åœºçš„ç«™ç‚¹æ•°æ®...
âœ… åŒæ­¥å®Œæˆ!
   æˆåŠŸ: 8/8 ä¸ªå¸‚åœº
   æ€»è®°å½•æ•°: 12,345
   æ€»è€—æ—¶: 15.2s
```

### æ­¥éª¤ 2: æŸ¥è¯¢ç«™ç‚¹

æ‰“å¼€ SPX Helper Extension â†’ å®ç”¨å·¥å…· â†’ ğŸ“ ç«™ç‚¹æŸ¥è¯¢

---

## ğŸ“… æ—¥å¸¸ä½¿ç”¨å»ºè®®

### æ–¹æ¡ˆ A: æ‰‹åŠ¨åŒæ­¥ï¼ˆä½ ç›®å‰çš„éœ€æ±‚ï¼‰

```bash
# 1. æ—©ä¸Šåˆ°å…¬å¸åï¼Œè¿æ¥ VPN
# 2. åŒæ­¥æ•°æ®
cd /Users/tianyi.liang/Cursor/SPX_Helper/station_query
python3 sync_station_data.py

# 3. ä½¿ç”¨ Extension æŸ¥è¯¢ï¼ˆæ•´å¤©éƒ½å¯ä»¥ç”¨ï¼‰
```

### æ–¹æ¡ˆ B: å®šæ—¶åŒæ­¥ï¼ˆæ¨èï¼‰

åœ¨å…¬å¸æœåŠ¡å™¨æˆ–å¯ä»¥è®¿é—®å†…ç½‘çš„æœºå™¨ä¸Šè®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š

```bash
# ç¼–è¾‘ crontab
crontab -e

# æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å¤©å‡Œæ™¨ 2 ç‚¹åŒæ­¥ï¼‰
0 2 * * * cd /path/to/station_query && python3 sync_station_data.py >> logs/sync.log 2>&1
```

---

## ğŸŒ ç½‘ç»œç¯å¢ƒè¯´æ˜

### å½“å‰çŠ¶æ€

| æœåŠ¡ | åœ°å€ | ç«¯å£ | ç½‘ç»œè¦æ±‚ | ç”¨é€” |
|------|------|------|---------|------|
| ONLINE2 | 10.180.129.96 | 8123 | âš ï¸ éœ€è¦å†…ç½‘/VPN | æ•°æ®åŒæ­¥çš„æº |
| TEST | clickhouse-k8s-sg-prod | 443 | âœ… å¤–ç½‘å¯è®¿é—® | æŸ¥è¯¢æ•°æ®çš„æ¥æº |
| API | localhost | 8888 | âœ… æœ¬åœ° | æŸ¥è¯¢æœåŠ¡ |

### ä½¿ç”¨åœºæ™¯

**åœºæ™¯ 1: åœ¨å…¬å¸ï¼ˆæœ‰å†…ç½‘è®¿é—®æƒé™ï¼‰**
```bash
# âœ… å¯ä»¥åŒæ­¥
python3 sync_station_data.py

# âœ… å¯ä»¥æŸ¥è¯¢
# æ‰“å¼€ Extension æŸ¥è¯¢
```

**åœºæ™¯ 2: åœ¨å®¶ï¼ˆæ— å†…ç½‘è®¿é—®ï¼‰**
```bash
# âŒ æ— æ³•åŒæ­¥ï¼ˆONLINE2 è¿æ¥è¶…æ—¶ï¼‰
# âœ… å¯ä»¥æŸ¥è¯¢ï¼ˆTEST ç¯å¢ƒå¯è®¿é—®ï¼‰
# ä½¿ç”¨ä¸Šæ¬¡åŒæ­¥çš„æ•°æ®
```

---

## ğŸ› ï¸ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### æ•°æ®åŒæ­¥

```bash
# åŒæ­¥æ‰€æœ‰å¸‚åœº
python3 sync_station_data.py

# åªåŒæ­¥ç‰¹å®šå¸‚åœº
python3 sync_station_data.py --markets sg,id,my

# åŠ å¿«åŒæ­¥é€Ÿåº¦
python3 sync_station_data.py --workers 8
```

### API æœåŠ¡ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
cd /Users/tianyi.liang/Cursor/SPX_Helper/station_query
nohup python3 station_api.py --port 8888 > logs/api.log 2>&1 &

# æŸ¥çœ‹çŠ¶æ€
ps aux | grep station_api

# æŸ¥çœ‹æ—¥å¿—
tail -f logs/api.log

# åœæ­¢æœåŠ¡
pkill -f station_api
```

### æµ‹è¯•æŸ¥è¯¢

```bash
# æµ‹è¯• API
curl http://localhost:8888/health

# æŸ¥è¯¢ç«™ç‚¹
curl "http://localhost:8888/station/id/123456"
curl "http://localhost:8888/station/name/Hub"
```

---

## ğŸ“Š æ•°æ®æ–°é²œåº¦

| åŒæ­¥é¢‘ç‡ | æ•°æ®å»¶è¿Ÿ | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------|
| æ¯å¤© 1 æ¬¡ | < 24h | æ—¥å¸¸ä½¿ç”¨ âœ… æ¨è |
| æ¯å‘¨ 1 æ¬¡ | < 7d | å¶å°”ä½¿ç”¨ |
| æ‰‹åŠ¨åŒæ­¥ | æŒ‰éœ€ | ä½ ç›®å‰çš„æ–¹å¼ |

---

## âš ï¸ é‡è¦æç¤º

1. **æ•°æ®åŒæ­¥éœ€è¦å†…ç½‘**: å¿…é¡»è¿æ¥å…¬å¸ VPN æˆ–åœ¨å†…ç½‘ç¯å¢ƒ
2. **æŸ¥è¯¢ä¸éœ€è¦å†…ç½‘**: TEST ç¯å¢ƒå¯ä»¥ä»å¤–ç½‘è®¿é—®
3. **åŒæ­¥ä¼šæ¸…ç©ºæ•°æ®**: åŒæ­¥æ—¶ä¼š TRUNCATE ç›®æ ‡è¡¨
4. **API æœåŠ¡ä¿æŒè¿è¡Œ**: ä¸€æ¬¡å¯åŠ¨ï¼ŒæŒç»­ä½¿ç”¨

---

## ğŸ¯ ä½ çš„ä½¿ç”¨æµç¨‹ï¼ˆæ¨èï¼‰

```bash
# === æ¯å¤©æ—©ä¸Šåˆ°å…¬å¸å ===

# 1. è¿æ¥ VPNï¼ˆå¦‚æœéœ€è¦ï¼‰

# 2. åŒæ­¥æ•°æ®ï¼ˆ5-30ç§’ï¼‰
cd /Users/tianyi.liang/Cursor/SPX_Helper/station_query
python3 sync_station_data.py

# 3. çœ‹åˆ°æˆåŠŸæç¤ºåï¼Œæ•´å¤©éƒ½å¯ä»¥æŸ¥è¯¢ç«™ç‚¹äº†
#    æ‰“å¼€ Extension â†’ å®ç”¨å·¥å…· â†’ ç«™ç‚¹æŸ¥è¯¢
```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [SYNC_GUIDE.md](SYNC_GUIDE.md) - æ•°æ®åŒæ­¥è¯¦ç»†æŒ‡å—
- [USAGE.md](USAGE.md) - ç«™ç‚¹æŸ¥è¯¢ä½¿ç”¨æŒ‡å—
- [DEPLOYMENT_SUCCESS.md](DEPLOYMENT_SUCCESS.md) - éƒ¨ç½²æˆåŠŸæ€»ç»“

---

**æ›´æ–°æ—¶é—´**: 2026-01-22  
**åŠŸèƒ½çŠ¶æ€**:  
- âœ… ç«™ç‚¹æŸ¥è¯¢: å¯ç”¨
- âœ… æ•°æ®åŒæ­¥: å¯ç”¨ï¼ˆéœ€è¦å†…ç½‘ï¼‰
